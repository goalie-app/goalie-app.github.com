(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(57),l=a.n(o),c=(a(78),a(79),a(2)),s=a(3),i=a(5),u=a(4),m=a(6),p=window.localStorage,d=a(13),h=a(7),b=new(a(71).a)({uri:"".concat("https://goal-backend.herokuapp.com","/gql")}),f=a(10),g=a.n(f),v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderError=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Error"),r.a.createElement("p",null,a.props.error.message))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.loading?r.a.createElement("p",null,"Loading..."):this.props.error?this.renderError():this.props.children}}]),t}(n.Component);function y(){var e=Object(d.a)(["\n  mutation CreateSession($name: String!, $password: String!) {\n    createSession(name: $name, password: $password) {\n      user { id }\n      token\n    }\n  }\n"]);return y=function(){return e},e}var _=g()(y()),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).nameInput=r.a.createRef(),a.passwordInput=r.a.createRef(),a.handleSessionCreation=function(e){e.preventDefault(),a.props.createSession({variables:{name:a.nameInput.current.value,password:a.passwordInput.current.value}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){this.props.rememberToken&&this.props.userId&&this.props.setAuth({rememberToken:this.props.rememberToken,userId:this.props.userId})}},{key:"render",value:function(){return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement("form",null,r.a.createElement("input",{className:"name",ref:this.nameInput}),r.a.createElement("input",{className:"password",type:"password",ref:this.passwordInput}),r.a.createElement("button",{onClick:this.handleSessionCreation},"Log In")))}}]),t}(n.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:_},function(t,a){var n=a.data,o=a.loading,l=a.error,c=n&&n.createSession&&n.createSession.token,s=n&&n.createSession&&n.createSession.user&&n.createSession.user.id;return r.a.createElement(O,{loading:o,error:l,setAuth:e.props.setAuth,createSession:t,rememberToken:c,userId:s})}))}}]),t}(n.Component),j=a(105),k=a(64),C=a.n(k),I=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{onClick:this.props.onClick,className:"".concat(this.props.className," ").concat(C.a.button)},this.props.children)}}]),t}(n.Component),N=a(65),w=a.n(N),D=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("svg",{onClick:this.props.onClick,className:"".concat(w.a.hamburger," ").concat(this.props.className),width:"131px",height:"131px",viewBox:"0 0 131 131",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("rect",{id:"Rectangle",fill:"#000000",x:"4",y:"8",width:"123",height:"22"}),r.a.createElement("rect",{id:"Rectangle",fill:"#000000",x:"4",y:"55",width:"123",height:"22"}),r.a.createElement("rect",{id:"Rectangle",fill:"#000000",x:"4",y:"101",width:"123",height:"22"})))}}]),t}(n.Component),x=a(19),A=a.n(x),G=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleHamburgerClick=function(){a.setState({open:!a.state.open})},a.closeMenu=function(){a.setState({open:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="\n      ".concat(A.a.headerContents,"\n      ").concat(this.state.open&&A.a.headerContentsMobile,"\n    ");return r.a.createElement("header",{className:A.a.header},r.a.createElement(D,{className:A.a.hamburger,onClick:this.handleHamburgerClick}),r.a.createElement("div",{className:e},r.a.createElement("label",{htmlFor:"selected-date",className:A.a.selectedDateLabel},"Selected Date"),r.a.createElement("input",{className:A.a.selectedDate,name:"selected-date",type:"date",value:this.props.selectedDate,onChange:this.props.handleDateChange}),r.a.createElement(j.a,{onClick:this.closeMenu,className:A.a.link,to:"/new-goal"},"New Goal"),r.a.createElement(j.a,{onClick:this.closeMenu,className:A.a.link,to:"/"},"View Goals"),r.a.createElement(I,{onClick:this.props.logOut,className:A.a.button},"Log Out")))}}]),t}(n.Component),$=a(11),S=a.n($),T=S.a.shape({id:S.a.number.isRequired,completedAt:S.a.string.isRequired}),M=S.a.arrayOf(T),q=S.a.shape({id:S.a.number.isRequired,name:S.a.string.isRequired,latestCompletion:T,completions:M}),F=(S.a.arrayOf(q),r.a.createContext({rememberToken:void 0,userId:void 0})),P=r.a.createContext(),R=a(24),B=a.n(R),Q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("svg",{width:"35px",height:"35px",viewBox:"0 0 630 630",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("rect",{className:B.a.background,fill:"#8D5687",x:"0",y:"0",width:"630",height:"630"}),r.a.createElement("polyline",{className:B.a.tick,stroke:"none",strokeWidth:"100",points:"109 293.646424 229.186565 440 529 152"}),r.a.createElement("rect",{className:this.tickCoverClass,fill:"#8D5687",x:"0",y:"0",width:"630",height:"630"}),r.a.createElement("polyline",{className:"".concat(B.a.ghostTick," ").concat(B.a.tick),stroke:"none",strokeWidth:"100",points:"109 293.646424 229.186565 440 529 152"})))}},{key:"tickCoverClass",get:function(){return"\n        ".concat(B.a.background,"\n        ").concat(B.a.tickCover,"\n        ").concat(this.props.checked&&B.a.tickCoverChecked,"\n      ")}}]),t}(n.PureComponent),Y=a(38),H=a.n(Y);function L(){var e=Object(d.a)(["\n  mutation DeleteCompletion($auth: AuthInput!, $completionId: Int!) {\n    deleteCompletion(auth: $auth, completionId: $completionId) {\n      goals {\n        id\n        completions {\n          id\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}function U(){var e=Object(d.a)(["\n  mutation CreateCompletion(\n    $auth: AuthInput!\n    $goalId: Int!\n    $completedAt: ISO8601DateTime!\n  ) {\n    createCompletion(auth: $auth, goalId: $goalId, completedAt: $completedAt) {\n      goals {\n        id\n        completions {\n          completedAt\n          id\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}var W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderTickBox=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:"completed",type:"checkbox",checked:a.props.checked,onChange:a.props.onClick}),r.a.createElement(Q,{checked:a.props.checked}))},a.renderButton=function(){return r.a.createElement(I,{className:H.a.button},r.a.createElement("p",{className:H.a.buttonText},a.props.checked?"Uncomplete Goal":"Complete Goal"),r.a.createElement(Q,{checked:a.props.checked}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(v,{loading:!1,error:this.props.error},r.a.createElement("div",{className:"".concat(H.a.tickBox," ").concat(this.props.className),onClick:this.props.loading?function(){}:this.props.onClick},this.props.button?this.renderButton():this.renderTickBox()))}}]),t}(n.Component);W.defaultProps={button:!1};var z=g()(U()),J=g()(L()),V=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P.Consumer,null,function(t){return r.a.createElement(F.Consumer,null,function(a){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:z},function(n,o){return r.a.createElement(h.Mutation,{mutation:J},function(l,c){var s=function(e){var t,a=e.goal,n=e.dateString,r=new Date(n);return a.completions.forEach(function(e){var a=new Date(e.completedAt);a.getFullYear()===r.getFullYear()&&a.getMonth()===r.getMonth()&&a.getDate()===r.getDate()&&(t=e)}),t}({goal:e.props.goal,dateString:t}),i=!!s;return r.a.createElement(W,{loading:o.loading||c.loading,error:o.error||c.error,onClick:i?function(e){e.preventDefault(),l({variables:{auth:a,completionId:s.id}})}:function(r){r.preventDefault(),n({variables:{auth:a,completedAt:new Date(t).toISOString(),goalId:e.props.goal.id}})},checked:i,button:e.props.button,className:e.props.className})})}))})})}}]),t}(n.Component),X=a(39),Z=a.n(X);function K(){var e=Object(d.a)(["\n  query Goals($auth: AuthInput!){\n    goals(auth: $auth) {\n      id\n      name\n      dueDate\n      completions {\n        id\n        completedAt\n      }\n    }\n  }\n"]);return K=function(){return e},e}var ee=g()(K()),te=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderGoal",value:function(e){return r.a.createElement(j.a,{to:"goals/".concat(e.id),key:e.id,className:Z.a.goal},r.a.createElement("h3",{className:Z.a.goalName},e.name),r.a.createElement("div",{className:Z.a.completionContainer},r.a.createElement(V,{goal:e})))}},{key:"render",value:function(){var e=this;return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},this.props.goals.map(function(t){return e.renderGoal(t)}))}}]),t}(n.Component),ae=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(F.Consumer,null,function(e){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Query,{query:ee,variables:{auth:e}},function(e){var t=e.data,a=e.loading,n=e.error;return r.a.createElement(te,{loading:a,error:n,goals:t&&t.goals||[]})}))})}}]),t}(n.Component),ne=(S.a.shape({userId:S.a.number.isRequired,rememberToken:S.a.string.isRequired}),a(108)),re=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(function(e){return void 0!==e}).join(" ")},oe=a(46),le=a.n(oe),ce=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:re(le.a.modal,this.props.className)},r.a.createElement("div",{className:le.a.modalInner},this.props.onClose&&r.a.createElement("button",null,"x"),this.props.children))}}]),t}(n.Component),se=a(40),ie=a.n(se),ue=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ce,null,r.a.createElement("p",{className:ie.a.text},this.props.text),r.a.createElement(I,{onClick:this.props.onConfirm,className:ie.a.confirm},"Confirm"),r.a.createElement(I,{onClick:this.props.onCancel,className:ie.a.cancel},"Cancel"))}}]),t}(n.Component),me=a(66),pe=a.n(me);function de(){var e=Object(d.a)(["\n  mutation DeleteGoal($auth: AuthInput!, $goalId: Int!){\n    deleteGoal(auth: $auth, goalId: $goalId) {\n      goals {\n        id\n      }\n    }\n  }\n"]);return de=function(){return e},e}var he=g()(de()),be=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={modalOpen:!1},a.handleDelete=function(){a.props.deleteGoal({variables:{auth:a.props.auth,goalId:a.props.goalId}})},a.renderConfirmationModal=function(){return a.state.modalOpen?r.a.createElement(ue,{text:"Are you sure want to delete this goal?",onConfirm:a.handleDelete,onCancel:function(){return a.setState({modalOpen:!1})}}):null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.called&&!this.props.loading?r.a.createElement(ne.a,{push:!0,to:"/"}):r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement(I,{onClick:function(){return e.setState({modalOpen:!0})},className:pe.a.button},"Delete Goal"),this.renderConfirmationModal())}}]),t}(n.Component),fe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.Consumer,null,function(t){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:he,update:function(e,a){var n=a.data;e.writeQuery({query:ee,variables:{auth:t},data:{goals:n.deleteGoal.goals}})}},function(a,n){var o=n.loading,l=n.error,c=n.called;return r.a.createElement(be,{called:c,loading:o,error:l,auth:t,goalId:e.props.goalId,deleteGoal:a})}))})}}]),t}(n.Component),ge=a(67),ve=a(68),ye=a.n(ve),_e=(a(100),a(26)),Oe=a.n(_e),Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={startDate:(new Date).getFullYear(),endDate:(new Date).getFullYear()+1},a.changeDate=function(e){e.preventDefault(),a.setState(Object(ge.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Oe.a.heatMap},r.a.createElement("h2",{className:Oe.a.header},"Historical Completions"),r.a.createElement("form",{className:Oe.a.dateForm},r.a.createElement("label",{htmlFor:"startDate",className:Oe.a.label},"Start Year"),r.a.createElement("input",{className:Oe.a.startDate,name:"startDate",type:"number",min:"2020",max:"3000",step:"1",value:this.state.startDate,onChange:this.changeDate}),r.a.createElement("label",{htmlFor:"endDate",className:Oe.a.label},"End Year"),r.a.createElement("input",{name:"endDate",type:"number",min:"2019",max:"3000",step:"1",value:this.state.endDate,onChange:this.changeDate})),r.a.createElement(ye.a,{startDate:"".concat(this.state.startDate-1,"-12-31"),endDate:"".concat(this.state.endDate-1,"-12-31"),values:this.props.completions.map(function(e){return{date:e.completedAt}})}))}}]),t}(n.Component),je=S.a.shape({id:S.a.number.isRequired,body:S.a.string.isRequired,date:S.a.string.isRequired}),ke=(S.a.arrayOf(je),a(69)),Ce=a.n(ke);function Ie(){var e=Object(d.a)(["\n  mutation DeleteNote($auth: AuthInput!, $noteId: Int!){\n    deleteNote(auth: $auth, noteId: $noteId) {\n      goal {\n        id\n      }\n    }\n  }\n\n"]);return Ie=function(){return e},e}var Ne=g()(Ie()),we=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(){a.props.deleteNote({variables:{auth:a.props.auth,noteId:a.props.noteId}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement(I,{onClick:this.handleDelete,className:Ce.a.button},"Delete"))}}]),t}(n.Component),De=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.Consumer,null,function(t){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:Ne,refetchQueries:[{query:$e,variables:{auth:t,goalId:e.props.goalId}}]},function(a,n){var o=n.loading,l=n.error;n.called;return r.a.createElement(we,{loading:o,error:l,auth:t,noteId:e.props.noteId,deleteNote:a})}))})}}]),t}(n.Component),xe=a(27),Ae=a.n(xe);function Ge(){var e=Object(d.a)(["\n  query Notes($auth: AuthInput!, $goalId: Int!){\n    notes(auth: $auth, goalId: $goalId) {\n      id\n      date\n      body\n    }\n  }\n"]);return Ge=function(){return e},e}var $e=g()(Ge()),Se=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderNotes",value:function(){var e=this;return this.props.notes.map(function(t){return r.a.createElement("div",{key:t.id,className:Ae.a.note},r.a.createElement("div",{className:Ae.a.noteHeader},r.a.createElement("p",{className:Ae.a.date},t.date),r.a.createElement(De,{noteId:t.id,goalId:e.props.goalId})),r.a.createElement("p",{className:Ae.a.body},t.body))})}},{key:"render",value:function(){return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement("div",{className:Ae.a.notes},r.a.createElement("h2",{className:Ae.a.header},"Notes"),this.renderNotes()))}}]),t}(n.Component),Te=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.Consumer,null,function(t){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Query,{query:$e,variables:{auth:t,goalId:e.props.goalId}},function(t){var a=t.data,n=t.loading,o=t.error;return r.a.createElement(Se,{loading:n,error:o,notes:a&&a.notes||[],goalId:e.props.goalId})}))})}}]),t}(n.Component),Me=a(20),qe=a.n(Me);function Fe(){var e=Object(d.a)(["\n  query Goal($auth: AuthInput!, $goalId: Int!){\n    goal(auth: $auth, goalId: $goalId) {\n      id\n      name\n      dueDate\n      completions {\n        id\n        completedAt\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}var Pe=g()(Fe()),Re=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderGoal",value:function(){var e=this.props.goal;return e?r.a.createElement("div",{className:qe.a.goal,key:e.id},r.a.createElement("h1",{className:qe.a.title},e.name),r.a.createElement("div",{className:qe.a.controls},r.a.createElement(V,{goal:e,button:!0,className:qe.a.completion}),r.a.createElement("div",{className:qe.a.spacer}),r.a.createElement(j.a,{to:"/goals/".concat(e.id,"/new-note")},r.a.createElement(I,{className:qe.a.newGoalButton},"New Note")),r.a.createElement("div",{className:qe.a.spacer}),r.a.createElement(j.a,{to:"/edit-goal/".concat(e.id)},r.a.createElement(I,{className:qe.a.editGoalButton},"Edit")),r.a.createElement("div",{className:qe.a.spacer}),r.a.createElement(fe,{goalId:e.id})),r.a.createElement(Te,{goalId:e.id}),r.a.createElement(Ee,{completions:e.completions})):null}},{key:"render",value:function(){return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},this.renderGoal())}}]),t}(n.Component),Be=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.Consumer,null,function(t){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Query,{query:Pe,variables:{auth:t,goalId:parseInt(e.props.match.params.goalId,10)}},function(e){var t=e.data,a=e.loading,n=e.error;return r.a.createElement(Re,{loading:a,error:n,goal:t&&t.goal})}))})}}]),t}(n.Component),Qe=a(31),Ye=a.n(Qe);function He(){var e=Object(d.a)(["\n  mutation CreateGoal($auth: AuthInput!, $goalName: String!){\n    createGoal(auth: $auth, goalName: $goalName) {\n      goal {\n        id\n        name\n        dueDate\n        completions {\n          id\n          completedAt\n        }\n      }\n    }\n  }\n"]);return He=function(){return e},e}var Le=g()(He()),Ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).nameInput=r.a.createRef(),a.handleGoalCreation=function(e){e.preventDefault(),a.props.createGoal({variables:{goalName:a.nameInput.current.value,auth:a.props.auth}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.called&&!this.props.loading?r.a.createElement(ne.a,{push:!0,to:"/"}):r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement("form",{className:Ye.a.newGoal},r.a.createElement("h1",{className:Ye.a.title},"Create Goal"),r.a.createElement("div",{className:Ye.a.inputContainer},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{className:"name",ref:this.nameInput,name:"name-input"})),r.a.createElement(I,{onClick:this.handleGoalCreation,className:Ye.a.button},"Create Goal")))}}]),t}(n.Component),We=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(F.Consumer,null,function(e){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:Le,update:function(t,a){var n=a.data,r=t.readQuery({query:ee,variables:{auth:e}}).goals;t.writeQuery({query:ee,variables:{auth:e},data:{goals:r.concat([n.createGoal.goal])}})}},function(t,a){var n=a.loading,o=a.error,l=a.called;return r.a.createElement(Ue,{loading:n,error:o,createGoal:t,auth:e,called:l})}))})}}]),t}(n.Component),ze=a(32),Je=a.n(ze);function Ve(){var e=Object(d.a)(["\n  mutation UpdateGoal($auth: AuthInput!, $name: String!, $id: Int!){\n    updateGoal(auth: $auth, name: $name, id: $id) {\n      goal {\n        id\n      }\n    }\n  }\n"]);return Ve=function(){return e},e}var Xe=g()(Ve()),Ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleGoalUpdate=function(e){e.preventDefault(),a.props.updateGoal(a.state.name)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement("form",{className:Je.a.editGoal},r.a.createElement("h1",{className:Je.a.title},"Update Goal"),r.a.createElement("div",{className:Je.a.inputContainer},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{autoFocus:!0,className:"name",value:this.state.name,onChange:function(t){var a=t.target;return e.setState({name:a.value})},name:"name"})),r.a.createElement(I,{onClick:this.handleGoalUpdate,className:Je.a.button},"Update Goal")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.goal&&""===t.name?{name:e.goal.name}:null}}]),t}(n.Component),Ke=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=parseInt(this.props.match.params.goalId,10);return r.a.createElement(F.Consumer,null,function(t){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Query,{query:Pe,variables:{auth:t,goalId:e}},function(a){var n=a.data;a.loading,a.error;return r.a.createElement(h.Mutation,{mutation:Xe,refetchQueries:[{query:Pe,variables:{auth:t,goalId:e}}]},function(a,o){var l=o.loading,c=o.error;if(o.called&&l)return r.a.createElement(ne.a,{push:!0,to:"/goals/".concat(e)});return r.a.createElement(Ze,{loading:l,error:c,updateGoal:function(n){return a({variables:{id:e,name:n,auth:t}})},goal:n&&n.goal})})}))})}}]),t}(n.Component),et=a(33),tt=a.n(et);function at(){var e=Object(d.a)(["\n  mutation CreateNote(\n    $auth: AuthInput!\n    $goalId: Int!\n    $date: ISO8601DateTime!\n    $body: String!\n  ) {\n    createNote(\n      auth: $auth,\n      goalId: $goalId,\n      date: $date,\n      body: $body\n    ) {\n      goal {\n        id\n        notes {\n          id\n          date\n          body\n        }\n      }\n    }\n  }\n"]);return at=function(){return e},e}var nt=g()(at()),rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).bodyInput=r.a.createRef(),a.handleNoteCreation=function(e){e.preventDefault(),a.props.createNote({variables:{goalId:a.props.goalId,auth:a.props.auth,body:a.bodyInput.current.value,date:a.props.selectedDate}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.called&&!this.props.loading?r.a.createElement(ne.a,{push:!0,to:"/goals/".concat(this.props.goalId)}):r.a.createElement(v,{loading:this.props.loading,error:this.props.error},r.a.createElement("form",{className:tt.a.newNote},r.a.createElement("h1",{className:tt.a.title},"Create Note"),r.a.createElement("textarea",{className:tt.a.bodyField,ref:this.bodyInput,name:"note-content"}),r.a.createElement(I,{onClick:this.handleNoteCreation,className:tt.a.button},"Create Note")))}}]),t}(n.Component),ot=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P.Consumer,null,function(t){return r.a.createElement(F.Consumer,null,function(a){return r.a.createElement(h.ApolloProvider,{client:b},r.a.createElement(h.Mutation,{mutation:nt,refetchQueries:[{query:$e,variables:{auth:a,goalId:parseInt(e.props.match.params.goalId,10)}}]},function(n,o){var l=o.loading,c=o.error,s=o.called;return r.a.createElement(rt,{loading:l,error:c,createNote:n,auth:a,called:s,goalId:parseInt(e.props.match.params.goalId,10),selectedDate:t})}))})})}}]),t}(n.Component),lt=a(106),ct=a(107),st=function(){var e=new Date,t=e.getMonth()+1;t=t<10?"0"+String(t):String(t);var a=e.getDate();return a=a<10?"0"+String(a):String(a),"".concat(e.getFullYear(),"-").concat(t,"-").concat(a)},it=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedDate:st()},a.handleDateChange=function(e){e.preventDefault(),a.setState({selectedDate:e.target.value})},a.setAuth=function(e){var t=e.rememberToken,n=e.userId;a.setState({rememberToken:t,userId:n}),p.setItem("rememberToken",t),p.setItem("userId",n)},a.logOut=function(){a.setState({rememberToken:void 0,userId:void 0}),p.setItem("rememberToken",void 0),p.setItem("userId",void 0)},a.auth=function(){return{rememberToken:a.state.rememberToken,userId:parseInt(a.state.userId,10)}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=p.getItem("rememberToken"),t=p.getItem("userId");e&&t&&this.setState({rememberToken:e,userId:t})}},{key:"render",value:function(){return this.state.rememberToken&&this.state.userId?r.a.createElement(F.Provider,{value:this.auth()},r.a.createElement(P.Provider,{value:this.state.selectedDate},r.a.createElement(lt.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{logOut:this.logOut,selectedDate:this.state.selectedDate,handleDateChange:this.handleDateChange}),r.a.createElement(ct.a,{exact:!0,path:"/",component:ae}),r.a.createElement(ct.a,{exact:!0,path:"/new-goal",component:We}),r.a.createElement(ct.a,{exact:!0,path:"/edit-goal/:goalId",component:Ke}),r.a.createElement(ct.a,{exact:!0,path:"/goals/:goalId",component:Be}),r.a.createElement(ct.a,{exact:!0,path:"/goals/:goalId/new-note",component:ot}))))):r.a.createElement(E,{setAuth:this.setAuth})}}]),t}(n.Component);l.a.render(r.a.createElement(it,null),document.getElementById("root"))},19:function(e,t,a){e.exports={header:"styles_header__107Vo",headerContents:"styles_headerContents__nmwje",hamburger:"styles_hamburger__2BVCH",selectedDateLabel:"styles_selectedDateLabel__1Ne_v",selectedDate:"styles_selectedDate__1cSzq",link:"styles_link__3jX9z",button:"styles_button__hh1XK",headerContentsMobile:"styles_headerContentsMobile__3QgIk"}},20:function(e,t,a){e.exports={goal:"styles_goal__9H5mM",title:"styles_title__3KNpG",controls:"styles_controls__1X3RY",spacer:"styles_spacer__30V3s",newGoalButton:"styles_newGoalButton__3IiSW",editGoalButton:"styles_editGoalButton__2QZUR",completion:"styles_completion__29k1Z"}},24:function(e,t,a){e.exports={tick:"styles_tick__IBPxw",hideTick:"styles_hideTick__u_dwi",background:"styles_background__1h5X4",tickCover:"styles_tickCover__25ek9",tickCoverChecked:"styles_tickCoverChecked__UL1G-",ghostTick:"styles_ghostTick__1Pog1"}},26:function(e,t,a){e.exports={heatMap:"styles_heatMap__3MHfQ",header:"styles_header__1D8Cf",dateForm:"styles_dateForm__3b_9k",startDate:"styles_startDate__37N4f",label:"styles_label__1QF5o"}},27:function(e,t,a){e.exports={notes:"styles_notes__1yWyA",header:"styles_header__3MxGy",note:"styles_note__3TQlA",noteHeader:"styles_noteHeader__3BsTu",date:"styles_date__28F7Y"}},31:function(e,t,a){e.exports={newGoal:"styles_newGoal__1THEs",title:"styles_title__3ZWgQ",button:"styles_button__j2kG9",inputContainer:"styles_inputContainer__1ovMC"}},32:function(e,t,a){e.exports={editGoal:"styles_editGoal__90V3R",title:"styles_title__oO1vz",button:"styles_button__3SJx-",inputContainer:"styles_inputContainer__1JyDC"}},33:function(e,t,a){e.exports={newNote:"styles_newNote__SPfBG",title:"styles_title__1zD5_",bodyField:"styles_bodyField__3XEgw",button:"styles_button__3vwfA"}},38:function(e,t,a){e.exports={tickBox:"styles_tickBox__3PnN0",button:"styles_button__10_3p",buttonText:"styles_buttonText__rPoh8"}},39:function(e,t,a){e.exports={goal:"styles_goal__34Y31",goalName:"styles_goalName__2-vML",completionContainer:"styles_completionContainer__WLz3A"}},40:function(e,t,a){e.exports={text:"styles_text__2-7Gn",confirm:"styles_confirm__2ULQZ",cancel:"styles_cancel__Okk5r"}},46:function(e,t,a){e.exports={modal:"styles_modal__2YrD5",modalInner:"styles_modalInner__2G8N3"}},64:function(e,t,a){e.exports={button:"styles_button__3j4M3"}},65:function(e,t,a){e.exports={hamburger:"styles_hamburger__3-Izt"}},66:function(e,t,a){e.exports={button:"styles_button__KQuah"}},69:function(e,t,a){e.exports={button:"styles_button__2fZJ7"}},73:function(e,t,a){e.exports=a(101)},79:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.ac41adf5.chunk.js.map